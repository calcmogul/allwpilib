From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Tyler Veness <calcmogul@gmail.com>
Date: Tue, 28 Jan 2025 22:19:31 -0800
Subject: [PATCH 4/9] Replace std::to_underlying()

---
 include/sleipnir/optimization/problem.hpp   | 8 ++++----
 include/sleipnir/util/print_diagnostics.hpp | 6 +++---
 2 files changed, 7 insertions(+), 7 deletions(-)

diff --git a/include/sleipnir/optimization/problem.hpp b/include/sleipnir/optimization/problem.hpp
index 094086bad32db1bf4361aa30df179c68e42d9b12..44ad2b6a2019fc6de1a59b150c1638c441499cfb 100644
--- a/include/sleipnir/optimization/problem.hpp
+++ b/include/sleipnir/optimization/problem.hpp
@@ -665,11 +665,11 @@ class Problem {
     // Print problem structure
     slp::println("\nProblem structure:");
     slp::println("  ↳ {} cost function",
-                 types[std::to_underlying(cost_function_type())]);
+                 types[static_cast<uint8_t>(cost_function_type())]);
     slp::println("  ↳ {} equality constraints",
-                 types[std::to_underlying(equality_constraint_type())]);
+                 types[static_cast<uint8_t>(equality_constraint_type())]);
     slp::println("  ↳ {} inequality constraints",
-                 types[std::to_underlying(inequality_constraint_type())]);
+                 types[static_cast<uint8_t>(inequality_constraint_type())]);
 
     if (m_decision_variables.size() == 1) {
       slp::print("\n1 decision variable\n");
@@ -681,7 +681,7 @@ class Problem {
         [](const gch::small_vector<Variable<Scalar>>& constraints) {
           std::array<size_t, 5> counts{};
           for (const auto& constraint : constraints) {
-            ++counts[std::to_underlying(constraint.type())];
+            ++counts[static_cast<uint8_t>(constraint.type())];
           }
           for (const auto& [count, name] :
                std::views::zip(counts, std::array{"empty", "constant", "linear",
diff --git a/include/sleipnir/util/print_diagnostics.hpp b/include/sleipnir/util/print_diagnostics.hpp
index d0b7e4a69ef1ce95a20c2aec30646d24b8f59ac0..c340452e61cbcdc2bf58682ebec22ee509e32d67 100644
--- a/include/sleipnir/util/print_diagnostics.hpp
+++ b/include/sleipnir/util/print_diagnostics.hpp
@@ -237,9 +237,9 @@ void print_iteration_diagnostics(int iterations, IterationType type,
   slp::println(
       "│{:4} {:4} {:9.3f} {:12e} {:13e} {:12e} {:12e} {:.2e} {:<5} {:.2e} "
       "{:.2e} {:2d}│",
-      iterations, ITERATION_TYPES[std::to_underlying(type)], to_ms(time), error,
-      cost, infeasibility, complementarity, μ, power_of_10(δ), primal_α, dual_α,
-      backtracks);
+      iterations, ITERATION_TYPES[static_cast<uint8_t>(type)], to_ms(time),
+      error, cost, infeasibility, complementarity, μ, power_of_10(δ), primal_α,
+      dual_α, backtracks);
 }
 #else
 #define print_iteration_diagnostics(...)
